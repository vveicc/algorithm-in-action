# 区间修改与懒惰标记

## [[T]](#区间修改与懒惰标记) LG3372. 线段树 1

???+ note "问题描述"
    第一行输入两个正整数 `n m` `(1≤n,m≤1e5)` ，表示数组长度和操作总个数。<br>
    第二行输入长为 `n` 的数组 `a` ，下标从 1 开始。<br>
    接下来 `m` 行，每行输入 3 或 4 个整数，表示一个操作，具体如下：

    1. `1 x y k` ：将数组 `a` 区间 `[x, y]` 内的每个数加上 `k` ；
    2. `2 x y` ：输出数组 `a` 区间 `[x, y]` 内每个数的和，每次输出一行。

    题目保证任意时刻数组 `a` 中所有元素的绝对值之和 `≤1e18` 。

    在 [洛谷](https://www.luogu.com.cn/problem/P3372 "普及/提高-") 查看该题。

??? info "解题思路"
    === "Go"
        ```go
        --8<-- "seg/lazy/go/lg3372.go"
        ```

## [[T]](#区间修改与懒惰标记) LG3373. 线段树 2

???+ note "问题描述"
    第一行输入两个正整数 `n m p` `(1≤n,m≤1e5)` ，表示数组长度、操作总个数和模数。<br>
    第二行输入长为 `n` 的数组 `a` ，下标从 1 开始。<br>
    接下来 `m` 行，每行输入 3 或 4 个整数，表示一个操作，具体如下：

    1. `1 x y k` ：将数组 `a` 区间 `[x, y]` 内的每个数乘上 `k` ；
    2. `2 x y k` ：将数组 `a` 区间 `[x, y]` 内的每个数加上 `k` ；
    3. `3 x y` ：输出数组 `a` 区间 `[x, y]` 内每个数的和对 `p` 取模的结果，每次输出一行。

    除样例数据 `p = 38` 外，其余 `p = 571373` 。

    在 [洛谷](https://www.luogu.com.cn/problem/P3373 "普及+/提高") 查看该题。

??? info "解题思路"
    === "Go"
        ```go
        --8<-- "seg/lazy/go/lg3373.go"
        ```

## LC2569. 最小无法得到的或值

???+ note "问题描述"
    给你两个长度为 `1≤n≤1e5` 下标从 0 开始的数组 `nums1` 和 `nums2` ，`0≤nums1[i]≤1` `0≤nums2[i]≤1e9` 。<br>
    另外给你一个长度为 `1≤m≤1e5` 的二维数组 `queries` 表示一些操作。总共有 3 种类型的操作：

    1. `queries[i] = [1, x, y]` ：将数组 `nums1` 区间 `[x, y]` 内的所有 0 反转成 1 ，1 反转成 0 ；
    2. `queries[i] = [2, p, 0]` ：对于所有下标 `0≤i<n` ，令 `nums2[i] = nums2[i] + nums1[i] * p` ；
    3. `queries[i] = [3, 0, 0]` ：求 `nums2` 中所有元素的和。

    请你返回一个数组，包含所有第三种操作类型的答案。

    在 [LeetCode主站](https://leetcode.com/problems/handling-sum-queries-after-update "Hard")
    或 [力扣中文社区](https://leetcode.cn/problems/handling-sum-queries-after-update "困难：2398") 查看该题。

??? info "解题思路"
    === "Go"
        ```go
        --8<-- "seg/lazy/go/lc2569.go"
        ```
